(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(n){if(n.ep)return;n.ep=!0;const s=a(n);fetch(n.href,s)}})();const C=".scoreboard{display:flex;flex-direction:column;gap:12px;padding:16px;border-radius:12px;background:linear-gradient(145deg,#1e1e2f,#2a2a40);color:#fff;font-family:Segoe UI,sans-serif;font-weight:500;box-shadow:0 4px 10px #0006;width:220px;height:100%;flex-wrap:nowrap;align-content:center;justify-content:space-evenly;align-items:stretch}.item{background:#ffffff14;padding:10px 14px;border-radius:8px;text-align:center;letter-spacing:.5px;font-size:1rem;transition:transform .2s ease,background .2s ease}.item:hover{background:#ffffff26;transform:translateY(-2px)}.item span.label{font-size:.85rem;color:#aaa;display:block}.item span.value{font-size:1.3rem;font-weight:700;color:gold}@media (max-width: 1100px){.scoreboard{width:99%;flex-direction:row;flex-wrap:wrap;justify-content:space-around;gap:8px;padding:12px}}@media (max-width: 600px){.item{flex:1 1;font-size:.9rem}.item span.value{font-size:1.1rem}}",O=75;class y extends HTMLElement{goal=75;score=0;numberOfDiscards=3;numberOfPlays=4;constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML="";const e=document.createElement("style");e.textContent=C,this.shadowRoot.appendChild(e);const a=document.createElement("div");a.classList.add("scoreboard"),a.innerHTML=`
        <div class="item">
            <span class="label">üéØ Goal</span>
            <span class="value">${this.goal}</span>
        </div>
        <div class="item">
            <span class="label">üèÜ Score</span>
            <span class="value">${this.score}</span>
        </div>
        <div class="item">
            <span class="label">üóëÔ∏è Discards</span>
            <span class="value">${this.numberOfDiscards}</span>
        </div>
        <div class="item">
            <span class="label">üé≤ Plays</span>
            <span class="value">${this.numberOfPlays}</span>
        </div>
    `,this.shadowRoot.appendChild(a)}addScore(e){this.score+=e,this.render()}getNumberOfDiscards(){return this.numberOfDiscards}getNumberOfPlays(){return this.numberOfPlays}decrementDiscards(){this.numberOfDiscards>0&&(this.numberOfDiscards--,this.render())}increaseGoal(){this.numberOfPlays>0&&(this.goal*=2),this.render()}decrementPlays(){this.numberOfPlays>0&&(this.numberOfPlays--,this.render())}resetScoreBoard(){this.score=0,this.goal=O,this.numberOfDiscards=3,this.numberOfPlays=4,this.render()}verifyGoal(){return this.score>=this.goal}}customElements.define("score-board",y);const S=["‚ô†","‚ô•","‚ô¶","‚ô£"],f=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],E={"‚ô†":"Espadas","‚ô•":"Copas","‚ô¶":"Ouros","‚ô£":"Paus"},k={A:"√Ås",2:"Dois",3:"Tr√™s",4:"Quatro",5:"Cinco",6:"Seis",7:"Sete",8:"Oito",9:"Nove",10:"Dez",J:"Valete",Q:"Dama",K:"Rei"},P={"Royal Flush":"Royal Flush","Straight Flush":"Straight Flush","Four of a Kind":"Quadra","Full House":"Full House",Flush:"Flush",Straight:"Straight","Three of a Kind":"Trinca","Two Pair":"Dois Pares","One Pair":"Um Par","High Card":"Carta Alta"},L=".carta{width:80px;height:120px;border:2px solid #333;border-radius:8px;background-color:#fff;box-shadow:2px 2px 6px #0003;margin:8px;padding:4px;display:flex;flex-direction:column;justify-content:space-between;font-family:Segoe UI,sans-serif;position:relative;transition:transform .2s ease,box-shadow .2s ease,border-color .2s ease}.carta:hover{transform:translateY(-8px) scale(1.05);box-shadow:4px 8px 16px #0000004d;border-color:#07f;cursor:pointer}.carta .valor-canto{font-size:16px;font-weight:700;position:absolute}.carta .valor-canto.top-left{top:4px;left:4px}.carta .valor-canto.bottom-right{bottom:4px;right:4px;transform:rotate(180deg)}.carta .naipe-centro{font-size:32px;text-align:center;margin-top:30px}.carta.naipe-vermelho{color:red}.carta.naipe-preto{color:#000}.cards-container{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;height:100%;align-content:center}.carta.selecionada{outline:3px solid blue;transform:translateY(-5px)}.btn-descartar{margin-top:16px;padding:8px 16px;font-size:16px;border:1px solid #333;border-radius:6px;cursor:pointer;background-color:#eee}.btn-descartar:hover{background-color:#ddd}.info-bar{margin-bottom:10px;font-size:14px;font-weight:700;text-align:center}";class A{card;constructor(e){this.card=e}genereteElement(e,a){const r=document.createElement("div");r.classList.add("carta"),r.setAttribute("data-valor",this.card.value),r.setAttribute("data-naipe",this.card.naipe),r.setAttribute("data-name",this.card.name||""),r.setAttribute("data-index",e);const n=this.card.naipe==="‚ô•"||this.card.naipe==="‚ô¶"?"naipe-vermelho":"naipe-preto";return r.classList.add(n),r.innerHTML=`
            <div class="valor-canto top-left">${this.card.value}<br>${this.card.naipe}</div>
            <div class="naipe-centro">${this.card.naipe}</div>
            <div class="valor-canto bottom-right">${this.card.value}<br>${this.card.naipe}</div>
        `,r.dataset.index=e,a&&r.addEventListener("click",a),r}}function T(t){console.log("Calculando pontua√ß√£o para as cartas:",t);const e=t.map(o=>F(o.value));let a=0,r=1;if(t.length===0)return 0;const n=I(t),s=e.reduce((o,p)=>o+p,0);switch(n){case"Royal Flush":r=10,a=s;break;case"Straight Flush":r=9,a=s;break;case"Four of a Kind":r=8,a=s;break;case"Full House":r=7,a=s;break;case"Flush":r=6,a=s;break;case"Straight":r=5,a=s;break;case"Three of a Kind":r=4,a=s;break;case"Two Pair":r=3,a=s;break;case"One Pair":r=2,a=s;break;case"High Card":r=1,a=s;break;default:console.warn("Tipo de m√£o desconhecido:",n),r=1,a=s;break}return{points:a*r,hand:` ${P[n]}, Pontos: ${a}, Multiplicador: ${r}, total: ${a*r}`}}function F(t){return t==="A"?15:["K","Q","J"].includes(t)?10:parseInt(t,10)}function m(t){if(t.length===0)return!1;const e=t[0].naipe;return t.every(a=>a.naipe===e)}function w(t){const e=[...f.slice(1),"A"],a=t.map(n=>e.indexOf(n.value)).sort((n,s)=>n-s),r=n=>{let s=1;for(let o=1;o<n.length;o++)if(n[o]===n[o-1]+1){if(s++,s>=5)return!0}else s=1;return!1};if(r(a))return!0;if(a.includes(f.length-1)){const n=t.map(s=>f.indexOf(s.value)).sort((s,o)=>s-o);if(r(n))return!0}return!1}function H(t){return m(t)&&w(t)}function D(t){if(!m(t))return!1;const e=t.map(a=>a.value);return e.includes("10")&&e.includes("J")&&e.includes("Q")&&e.includes("K")&&e.includes("A")}function R(t){if(t.length<5)return!1;const e={};t.forEach(r=>{e[r.value]=(e[r.value]||0)+1});const a=Object.values(e);return a.includes(3)&&a.includes(2)}function j(t){if(t.length<4)return!1;const e={};return t.forEach(a=>{e[a.value]=(e[a.value]||0)+1}),Object.values(e).includes(4)}function B(t){if(t.length<3)return!1;const e={};return t.forEach(a=>{e[a.value]=(e[a.value]||0)+1}),Object.values(e).includes(3)}function $(t){if(t.length<4)return!1;const e={};return t.forEach(r=>{e[r.value]=(e[r.value]||0)+1}),Object.values(e).filter(r=>r===2).length===2}function M(t){if(t.length<2)return!1;const e={};return t.forEach(a=>{e[a.value]=(e[a.value]||0)+1}),Object.values(e).includes(2)}function I(t){const e=t.length;return e===5&&D(t)?"Royal Flush":e===5&&H(t)?"Straight Flush":e>=4&&j(t)?"Four of a Kind":e===5&&R(t)?"Full House":e===5&&m(t)?"Flush":e===5&&w(t)?"Straight":e>=3&&B(t)?"Three of a Kind":e>=4&&$(t)?"Two Pair":e>=2&&M(t)?"One Pair":"High Card"}class h extends HTMLElement{deck=[];hand=[];constructor(){super(),this.attachShadow({mode:"open"}),this.gerarDeck(),this.shuffleDeck(),this.fillHand(),this.render()}gerarDeck(){this.deck=[],S.forEach(e=>{f.forEach(a=>{const r=`${k[a]} de ${E[e]}`;this.deck.push({value:a,naipe:e,name:r})})})}getDeck(){return this.deck}shuffleDeck(){for(let e=this.deck.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[this.deck[e],this.deck[a]]=[this.deck[a],this.deck[e]]}}fillHand(){for(;this.hand.length<8;){const e=this.deck.pop();if(e!==void 0)this.hand.push(e);else break}}removeSelectedCards(e){const a=this.shadowRoot?.querySelectorAll(".carta.selecionada");if(a){const r=[];if(a.forEach(n=>{r.push(n.getAttribute("data-index")?parseInt(n.getAttribute("data-index")||"0",10):0)}),r.length===0)return;r.sort((n,s)=>s-n),r.forEach(n=>{this.hand.splice(n,1)}),e.decrementDiscards(),this.fillHand(),this.render()}}playSelectedCards(){const e=this.shadowRoot?.querySelectorAll(".carta.selecionada");if(e?.length&&e.length>0){const a=[];let r=[];e.forEach(s=>{r.push({value:s.getAttribute("data-valor"),naipe:s.getAttribute("data-naipe"),name:s.getAttribute("data-name")||""})});const n=T(r);return typeof n=="number"?!1:(e.forEach(s=>{a.push(s.getAttribute("data-index")?parseInt(s.getAttribute("data-index")||"0",10):0)}),a.sort((s,o)=>o-s),a.forEach(s=>{this.hand.splice(s,1)}),this.fillHand(),this.render(),n)}return!1}render(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML="";const e=document.createElement("style");e.textContent=L,this.shadowRoot.appendChild(e);const a=document.createElement("div");a.classList.add("cards-container"),this.hand.forEach((r,n)=>{const o=new A(r).genereteElement(n.toString(),p=>{const b=p.currentTarget;b.classList.toggle("selecionada");const v=this.shadowRoot?.querySelectorAll(".carta.selecionada");v&&v.length>5&&b.classList.remove("selecionada")});a.appendChild(o)}),this.shadowRoot.appendChild(a)}}customElements.define("deck-generator",h);const d=document.getElementById("boardgame"),K=document.getElementById("buttons"),x=document.getElementById("sidebar");let l=new h,c=new y,u=!0;z();N();G();function N(){K&&(V(),q(),J())}function G(){if(d){d.classList.add("board-game");const t=document.createElement("div");t.classList.add("board-game-container"),t.appendChild(l),l.remove(),l=new h,d.appendChild(t),d.appendChild(l)}}function z(){if(x){const t=document.createElement("div");t.classList.add("scoreboard"),t.appendChild(c),x.appendChild(t)}}function g(t,e,a,r=document.getElementById("buttons")){if(!r)return;const n=document.createElement("button");n.classList.add(e),n.innerText=t,n.addEventListener("click",a),r.appendChild(n)}function V(){g("Reiniciar Jogo","btn-reset",()=>{l.remove(),l=new h,d?.appendChild(l),c.resetScoreBoard(),i("Jogo reiniciado!",5,"info"),u=!0})}function q(){g("Descartar Selecionadas","btn-discard",()=>{if(!u){i("Por favor, reinicie o jogo!",5,"error");return}if(c.getNumberOfDiscards()<=0){i("Voc√™ n√£o tem mais descartes dispon√≠veis!",5,"error");return}const t=l.shadowRoot?.querySelectorAll(".carta.selecionada");if(!t||t.length===0){i("Selecione pelo menos uma carta para descartar!",5,"error");return}l.removeSelectedCards(c)})}function J(){g("Jogar Selecionadas","btn-play",()=>{if(!u){i("Por favor, reinicie o jogo!",5,"error");return}if(c.getNumberOfPlays()<=0){i("Voc√™ n√£o tem mais jogadas dispon√≠veis!",5,"error"),c.verifyGoal()&&(i("Voc√™ venceu!",5,"info"),i("Reinicie o jogo para jogar novamente!",5,"info"));return}const t=l.playSelectedCards();if(typeof t=="boolean"){i("Selecione pelo menos uma carta!",5,"error");return}if(c.addScore(t.points),c.decrementPlays(),u=c.verifyGoal(),i(`Voc√™ jogou: ${t.hand}`,5),!u){i("Voc√™ n√£o atingiu a pontua√ß√£o necess√°ria!",5,"defeated");return}if(c.getNumberOfPlays()===0&&c.verifyGoal()){i("Voc√™ venceu!",8,"winner"),i("Reinicie o jogo para jogar novamente!",5,"info");return}c.increaseGoal()})}function Q(){let t=document.getElementById("message-container");return t||(t=document.createElement("div"),t.id="message-container",d?.appendChild(t)),t}function i(t,e,a="info"){const r=Q(),n=document.createElement("div");n.textContent=t,n.classList.add("msg",a),r.appendChild(n),requestAnimationFrame(()=>n.classList.add("show")),setTimeout(()=>{n.classList.remove("show"),setTimeout(()=>n.remove(),300)},e*1e3)}

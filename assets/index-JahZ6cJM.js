(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function a(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=a(r);fetch(r.href,s)}})();const O=".scoreboard{display:flex;flex-direction:column;gap:12px;padding:16px;border-radius:12px;background:linear-gradient(145deg,#1e1e2f,#2a2a40);color:#fff;font-family:Segoe UI,sans-serif;font-weight:500;box-shadow:0 4px 10px #0006;width:220px;height:100%;flex-wrap:nowrap;align-content:center;justify-content:space-evenly;align-items:stretch}.item{background:#ffffff14;padding:10px 14px;border-radius:8px;text-align:center;letter-spacing:.5px;font-size:1rem;transition:transform .2s ease,background .2s ease}.item:hover{background:#ffffff26;transform:translateY(-2px)}.item span.label{font-size:.85rem;color:#aaa;display:block}.item span.value{font-size:1.3rem;font-weight:700;color:gold}@media (max-width: 1100px){.scoreboard{width:99%;flex-direction:row;flex-wrap:wrap;justify-content:space-around;gap:8px;padding:12px}}@media (max-width: 600px){.item{flex:1 1;font-size:.9rem}.item span.value{font-size:1.1rem}}",x=75;class w extends HTMLElement{goal=x;score=0;numberOfDiscards=3;numberOfPlays=4;constructor(){super(),this.attachShadow({mode:"open"}),this.render()}render(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML="";const e=document.createElement("style");e.textContent=O,this.shadowRoot.appendChild(e);const a=document.createElement("div");a.classList.add("scoreboard"),a.innerHTML=`
        <div class="item">
            <span class="label">üéØ Goal</span>
            <span class="value">${this.goal}</span>
        </div>
        <div class="item">
            <span class="label">üèÜ Score</span>
            <span class="value">${this.score}</span>
        </div>
        <div class="item">
            <span class="label">üóëÔ∏è Discards</span>
            <span class="value">${this.numberOfDiscards}</span>
        </div>
        <div class="item">
            <span class="label">üé≤ Plays</span>
            <span class="value">${this.numberOfPlays}</span>
        </div>
    `,this.shadowRoot.appendChild(a)}addScore(e){this.score+=e,this.render()}getNumberOfDiscards(){return this.numberOfDiscards}getNumberOfPlays(){return this.numberOfPlays}decrementDiscards(){this.numberOfDiscards>0&&(this.numberOfDiscards--,this.render())}increaseGoal(){this.numberOfPlays>0&&(this.goal*=2),this.render()}decrementPlays(){this.numberOfPlays>0&&(this.numberOfPlays--,this.render())}resetScoreBoard(){this.score=0,this.goal=x,this.numberOfDiscards=3,this.numberOfPlays=4,this.render()}verifyGoal(){return this.score>=this.goal}}customElements.define("score-board",w);const S=["‚ô†","‚ô•","‚ô¶","‚ô£"],u=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],E={"‚ô†":"Espadas","‚ô•":"Copas","‚ô¶":"Ouros","‚ô£":"Paus"},k={A:"√Ås",2:"Dois",3:"Tr√™s",4:"Quatro",5:"Cinco",6:"Seis",7:"Sete",8:"Oito",9:"Nove",10:"Dez",J:"Valete",Q:"Dama",K:"Rei"},P={"Royal Flush":"Sequ√™ncia Real","Straight Flush":"Sequ√™ncia de mesmo naipe","Four of a Kind":"Quadra","Full House":"Full House",Flush:"Flush",Straight:"Sequ√™ncia","Three of a Kind":"Trinca","Two Pair":"Dois Pares","One Pair":"Um Par","High Card":"Carta Alta"},L=".carta{width:80px;height:120px;border:2px solid #333;border-radius:8px;background-color:#fff;box-shadow:2px 2px 6px #0003;margin:8px;padding:4px;display:flex;flex-direction:column;justify-content:space-between;font-family:Segoe UI,sans-serif;position:relative}.carta .valor-canto{font-size:16px;font-weight:700;position:absolute}.carta .valor-canto.top-left{top:4px;left:4px}.carta .valor-canto.bottom-right{bottom:4px;right:4px;transform:rotate(180deg)}.carta .naipe-centro{font-size:32px;text-align:center;margin-top:30px}.carta.naipe-vermelho{color:red}.carta.naipe-preto{color:#000}.cards-container{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;height:100%;align-content:center}.carta.selecionada{outline:3px solid blue;transform:translateY(-5px)}.btn-descartar{margin-top:16px;padding:8px 16px;font-size:16px;border:1px solid #333;border-radius:6px;cursor:pointer;background-color:#eee}.btn-descartar:hover{background-color:#ddd}.info-bar{margin-bottom:10px;font-size:14px;font-weight:700;text-align:center}";class T{card;constructor(e){this.card=e}genereteElement(e,a){const n=document.createElement("div");n.classList.add("carta"),n.setAttribute("data-valor",this.card.value),n.setAttribute("data-naipe",this.card.naipe),n.setAttribute("data-name",this.card.name||""),n.setAttribute("data-index",e);const r=this.card.naipe==="‚ô•"||this.card.naipe==="‚ô¶"?"naipe-vermelho":"naipe-preto";return n.classList.add(r),n.innerHTML=`
            <div class="valor-canto top-left">${this.card.value}<br>${this.card.naipe}</div>
            <div class="naipe-centro">${this.card.naipe}</div>
            <div class="valor-canto bottom-right">${this.card.value}<br>${this.card.naipe}</div>
        `,n.dataset.index=e,a&&n.addEventListener("click",a),n}}function A(t){console.log("Calculando pontua√ß√£o para as cartas:",t);const e=t.map(c=>H(c.value));let a=0,n=1;if(t.length===0)return 0;const r=M(t),s=e.reduce((c,p)=>c+p,0);switch(r){case"Royal Flush":n=10,a=s;break;case"Straight Flush":n=9,a=s;break;case"Four of a Kind":n=8,a=s;break;case"Full House":n=7,a=s;break;case"Flush":n=6,a=s;break;case"Straight":n=5,a=s;break;case"Three of a Kind":n=4,a=s;break;case"Two Pair":n=3,a=s;break;case"One Pair":n=2,a=s;break;case"High Card":n=1,a=s;break;default:console.warn("Tipo de m√£o desconhecido:",r),n=1,a=s;break}return{points:a*n,hand:` ${P[r]}, Pontos: ${a}, Multiplicador: ${n}, total: ${a*n}`}}function H(t){return t==="A"?15:["K","Q","J"].includes(t)?10:parseInt(t,10)}function m(t){if(t.length===0)return!1;const e=t[0].naipe;return t.every(a=>a.naipe===e)}function C(t){if(t.length===0||t.length<5)return!1;t.sort((a,n)=>u.indexOf(a.value)-u.indexOf(n.value));const e=u.indexOf(t[0].value);for(let a=1;a<t.length;a++)if(u.indexOf(t[a].value)!==e+a)return!1;return!0}function F(t){return m(t)&&C(t)}function D(t){if(!m(t))return!1;const e=t.map(a=>a.value);return e.includes("10")&&e.includes("J")&&e.includes("Q")&&e.includes("K")&&e.includes("A")}function R(t){if(t.length<5)return!1;const e={};t.forEach(n=>{e[n.value]=(e[n.value]||0)+1});const a=Object.values(e);return a.includes(3)&&a.includes(2)}function j(t){if(t.length<4)return!1;const e={};return t.forEach(a=>{e[a.value]=(e[a.value]||0)+1}),Object.values(e).includes(4)}function B(t){if(t.length<3)return!1;const e={};return t.forEach(a=>{e[a.value]=(e[a.value]||0)+1}),Object.values(e).includes(3)}function $(t){if(t.length<4)return!1;const e={};return t.forEach(n=>{e[n.value]=(e[n.value]||0)+1}),Object.values(e).filter(n=>n===2).length===2}function I(t){if(t.length<2)return!1;const e={};return t.forEach(a=>{e[a.value]=(e[a.value]||0)+1}),Object.values(e).includes(2)}function M(t){const e=t.length;return e===5&&D(t)?"Royal Flush":e===5&&F(t)?"Straight Flush":e>=4&&j(t)?"Four of a Kind":e===5&&R(t)?"Full House":e===5&&m(t)?"Flush":e===5&&C(t)?"Straight":e>=3&&B(t)?"Three of a Kind":e>=4&&$(t)?"Two Pair":e>=2&&I(t)?"One Pair":"High Card"}class h extends HTMLElement{deck=[];hand=[];constructor(){super(),this.attachShadow({mode:"open"}),this.gerarDeck(),this.shuffleDeck(),this.fillHand(),this.render()}gerarDeck(){this.deck=[],S.forEach(e=>{u.forEach(a=>{const n=`${k[a]} de ${E[e]}`;this.deck.push({value:a,naipe:e,name:n})})})}getDeck(){return this.deck}shuffleDeck(){for(let e=this.deck.length-1;e>0;e--){const a=Math.floor(Math.random()*(e+1));[this.deck[e],this.deck[a]]=[this.deck[a],this.deck[e]]}}fillHand(){for(;this.hand.length<8;){const e=this.deck.pop();if(e!==void 0)this.hand.push(e);else break}}removeSelectedCards(e){const a=this.shadowRoot?.querySelectorAll(".carta.selecionada");if(a){const n=[];if(a.forEach(r=>{n.push(r.getAttribute("data-index")?parseInt(r.getAttribute("data-index")||"0",10):0)}),n.length===0)return;n.sort((r,s)=>s-r),n.forEach(r=>{this.hand.splice(r,1)}),e.decrementDiscards(),this.fillHand(),this.render()}}playSelectedCards(){const e=this.shadowRoot?.querySelectorAll(".carta.selecionada");if(e?.length&&e.length>0){const a=[];let n=[];e.forEach(s=>{n.push({value:s.getAttribute("data-valor"),naipe:s.getAttribute("data-naipe"),name:s.getAttribute("data-name")||""})});const r=A(n);return typeof r=="number"?!1:(e.forEach(s=>{a.push(s.getAttribute("data-index")?parseInt(s.getAttribute("data-index")||"0",10):0)}),a.sort((s,c)=>c-s),a.forEach(s=>{this.hand.splice(s,1)}),this.fillHand(),this.render(),r)}return!1}render(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML="";const e=document.createElement("style");e.textContent=L,this.shadowRoot.appendChild(e);const a=document.createElement("div");a.classList.add("cards-container"),this.hand.forEach((n,r)=>{const c=new T(n).genereteElement(r.toString(),p=>{const b=p.currentTarget;b.classList.toggle("selecionada");const v=this.shadowRoot?.querySelectorAll(".carta.selecionada");v&&v.length>5&&b.classList.remove("selecionada")});a.appendChild(c)}),this.shadowRoot.appendChild(a)}}customElements.define("deck-generator",h);const d=document.getElementById("boardgame"),K=document.getElementById("buttons"),y=document.getElementById("sidebar");let l=new h,i=new w,f=!0;V();N();G();function N(){K&&(z(),q(),J())}function G(){if(d){d.classList.add("board-game");const t=document.createElement("div");t.classList.add("board-game-container"),t.appendChild(l),l.remove(),l=new h,d.appendChild(t),d.appendChild(l)}}function V(){if(y){const t=document.createElement("div");t.classList.add("scoreboard"),t.appendChild(i),y.appendChild(t)}}function g(t,e,a,n=document.getElementById("buttons")){if(!n)return;const r=document.createElement("button");r.classList.add(e),r.innerText=t,r.addEventListener("click",a),n.appendChild(r)}function z(){g("Reiniciar Jogo","btn-reset",()=>{l.remove(),l=new h,d?.appendChild(l),i.resetScoreBoard(),o("Jogo reiniciado!",5,"info"),f=!0})}function q(){g("Descartar Selecionadas","btn-discard",()=>{if(!f){o("Por favor, reinicie o jogo!",5,"error");return}if(i.getNumberOfDiscards()<=0){o("Voc√™ n√£o tem mais descartes dispon√≠veis!",5,"error");return}const t=l.shadowRoot?.querySelectorAll(".carta.selecionada");if(!t||t.length===0){o("Selecione pelo menos uma carta para descartar!",5,"error");return}l.removeSelectedCards(i)})}function J(){g("Jogar Selecionadas","btn-play",()=>{if(!f){o("Por favor, reinicie o jogo!",5,"error");return}if(i.getNumberOfPlays()<=0){o("Voc√™ n√£o tem mais jogadas dispon√≠veis!",5,"error"),i.verifyGoal()&&(o("Voc√™ venceu!",5,"info"),o("Reinicie o jogo para jogar novamente!",5,"info"));return}const t=l.playSelectedCards();if(typeof t=="boolean"){o("Selecione pelo menos uma carta!",5,"error");return}if(i.addScore(t.points),i.decrementPlays(),f=i.verifyGoal(),o(`Voc√™ jogou: ${t.hand}`,5),!f){o("Voc√™ n√£o atingiu a pontua√ß√£o necess√°ria!",5,"defeated");return}if(i.getNumberOfPlays()===0&&i.verifyGoal()){o("Voc√™ venceu!",8,"winner"),o("Reinicie o jogo para jogar novamente!",5,"info");return}i.increaseGoal()})}function Q(){let t=document.getElementById("message-container");return t||(t=document.createElement("div"),t.id="message-container",d?.appendChild(t)),t}function o(t,e,a="info"){const n=Q(),r=document.createElement("div");r.textContent=t,r.classList.add("msg",a),n.appendChild(r),requestAnimationFrame(()=>r.classList.add("show")),setTimeout(()=>{r.classList.remove("show"),setTimeout(()=>r.remove(),300)},e*1e3)}
